(function(){const n=(...e)=>{var t;return(t=window.location.href)!=null&&t.includes("debug")?console.log("[RB Img Check]",...e):null};n("Missing image check script loaded");async function a(e){var t,o;if(!e.currentSrc){n("Image doesn't have a currentSrc. Skipping check.",e);return}if(e.naturalWidth!==0&&e.naturalHeight!==0){n(`Image loaded successfully with dimensions ${e.naturalWidth}x${e.naturalHeight}.`,e);return}const r=await fetch(e.currentSrc,{method:"HEAD"});r.ok?n(`Image ${e.currentSrc} returned ${r.status}.`,e):(n(`Image ${e.currentSrc} returned ${r.status}. Reporting to Render Better.`,e),await fetch("/rb-analytics/missing-image",{method:"POST",headers:{"Content-Type":"application/json","x-rb-trace-id":((o=(t=window?.renderbetter)==null?void 0:t.analyticsProperties)==null?void 0:o.traceId)||""},body:JSON.stringify({type:"missing-image",src:e.currentSrc,status:r.status,html:e.outerHTML,pathname:window.location.pathname,windowWidth:window.innerWidth,windowHeight:window.innerHeight})}))}async function i(){for(const e of document.querySelectorAll("[rb-img]")){if(n("Checking image",e),e.complete)return await a(e);e.addEventListener("error",t=>{a(t.target)}),e.addEventListener("load",t=>{a(t.target)})}}window.addEventListener("DOMContentLoaded",function(){i()})})();
